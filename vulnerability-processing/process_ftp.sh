#!/bin/bash
# 
# @summary Script downloads the file with wget and uses show_ast.js
# @author Vojtěch Randýsek, xrandy00@vutbr.cz
# 
# Created at     : 2022-05-06 22:23:10 
# Last modified  : 2022-05-07 11:03:17
# 

realpath() {
    [[ $1 = /* ]] && echo "$1" || echo "$PWD/${1#./}"
}

rm -rf tmp
mkdir tmp
cd tmp

# download both of the files
wget $1 -O broken.js
wget $2 -O fixed.js

# pass them to show_ast with metadata
cd ..
    node show_ast "$(realpath tmp/broken.js)" "$(realpath tmp/fixed.js)" "$3" "$4" "$5" "$6"
